<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>우마무스메 스킬 체크 v0.9</title>
    <link rel="stylesheet" href="style.css?v=0.9.0">
</head>
<body>
    <div class="container">
        <header>
            <h1>우마무스메 스킬 체크 헬퍼</h1>
            <div class="top-controls">
                <button id="manage-collection-btn">내 컬렉션 관리</button>
                <button id="theme-toggle">🌙</button>
                <input type="file" id="upload-json" accept=".json" style="display: none;">
                <button id="upload-button">업로드</button>
                <button id="download-button">다운로드</button>
                <button id="reset-data-button" title="모든 데이터를 초기화합니다">⚠️ 초기화</button>
            </div>
        </header>

        <main>
            <section class="deck-builder">
                <h2>덱 편성</h2>
                <div class="deck-slots">
                    <div class="slot">
                        <label for="scenario-select">시나리오</label>
                        <select id="scenario-select">
                            <option value="">-- 시나리오 --</option>
                        </select>
                    </div>
                    <div class="slot">
                        <label for="inza-select-1">인자 1</label>
                        <select id="inza-select-1" class="inza-select">
                            <option value="">-- 인자 선택 --</option>
                        </select>
                    </div>
                     <div class="slot">
                        <label for="inza-select-2">인자 2</label>
                        <select id="inza-select-2" class="inza-select">
                            <option value="">-- 인자 선택 --</option>
                        </select>
                    </div>
                    <div class="slot">
                        <label for="sc-select-1">서포트 1</label>
                        <select id="sc-select-1" class="sc-select">
                            <option value="">-- 선택 --</option>
                        </select>
                    </div>
                    <div class="slot">
                        <label for="sc-select-2">서포트 2</label>
                        <select id="sc-select-2" class="sc-select">
                            <option value="">-- 선택 --</option>
                        </select>
                    </div>
                    <div class="slot">
                        <label for="sc-select-3">서포트 3</label>
                        <select id="sc-select-3" class="sc-select">
                            <option value="">-- 선택 --</option>
                        </select>
                    </div>
                    <div class="slot">
                        <label for="sc-select-4">서포트 4</label>
                        <select id="sc-select-4" class="sc-select">
                            <option value="">-- 선택 --</option>
                        </select>
                    </div>
                    <div class="slot">
                        <label for="sc-select-5">서포트 5</label>
                        <select id="sc-select-5" class="sc-select">
                            <option value="">-- 선택 --</option>
                        </select>
                    </div>
                     <div class="slot">
                        <label for="sc-select-6">서포트 6</label>
                        <select id="sc-select-6" class="sc-select">
                            <option value="">-- 선택 --</option>
                        </select>
                    </div>
                </div>
            </section>

            <section class="target-progress-section">
                <div class="target-header">
                    <h2>목표 진행률</h2>
                    <button id="open-target-modal-btn">🎯 목표 설정</button>
                </div>
                <div id="target-progress-bar-container">
                    <div id="target-progress-bar"></div>
                </div>
                <div id="target-progress-text">목표를 설정해주세요.</div>
                <div class="target-bubbles-container">
                    <details>
                        <summary>획득한 목표 (<span id="acquired-target-count">0</span>)</summary>
                        <div id="acquired-target-bubbles" class="bubbles-wrapper"></div>
                    </details>
                    <details open>
                        <summary>남은 목표 (<span id="remaining-target-count">0</span>)</summary>
                        <div id="remaining-target-bubbles" class="bubbles-wrapper"></div>
                    </details>
                </div>
            </section>

            <section class="skill-list-section">
                <div class="skill-list-header">
                    <h2>획득 가능 스킬 목록</h2>
                    <div class="skill-list-controls">
                        <label class="toggle-switch">
                            <input type="checkbox" id="show-details-toggle">
                            <span class="slider"></span>
                            상세 정보 표시
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="hide-acquired-toggle">
                            <span class="slider"></span>
                            획득 스킬 숨기기
                        </label>
                        <button id="reset-skills">새 육성 (초기화)</button>
                    </div>
                </div>
                <div id="skill-list-container">
                    <p class="placeholder">덱을 편성하면 획득 가능한 스킬 목록이 여기에 표시됩니다.</p>
                </div>
                <details id="acquired-skills-section" class="skill-group">
                    <summary>✅ 획득 완료 스킬</summary>
                    <div id="acquired-skills-container"></div>
                </details>
            </section>
        </main>
    </div>

    <!-- 목표 설정 모달 -->
    <div id="target-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">×</button>
            <h2>목표 스킬 설정</h2>
            <div class="modal-body">
                <div class="modal-column" id="modal-all-skills">
                    <h3>전체 스킬</h3>
                    <input type="text" id="modal-search" placeholder="스킬 검색...">
                    <div class="skill-list"></div>
                </div>
                <div class="modal-column" id="modal-required-skills">
                    <h3>필수 스킬</h3>
                    <div class="skill-list"></div>
                </div>
                <div class="modal-column" id="modal-ignored-skills">
                    <h3>무시할 스킬</h3>
                    <div class="skill-list"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="modal-save-btn">저장하고 닫기</button>
            </div>
        </div>
    </div>
    
    <!-- 컬렉션 관리 모달 -->
    <div id="collection-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content wide">
            <button class="modal-close-btn">×</button>
            <h2>내 컬렉션 관리</h2>
            <div class="modal-tabs">
                <button class="tab-btn active" data-tab="sc-tab">서포트 카드</button>
                <button class="tab-btn" data-tab="inza-tab">인자</button>
            </div>
            <div class="modal-body-collection">
                <!-- 서포트 카드 탭 -->
                <div id="sc-tab" class="tab-content active">
                    <div class="collection-forms">
                        <form id="add-master-sc-form">
                            <h3>기존 카드로 추가</h3>
                            <select id="master-sc-select">
                                <option value="">-- 마스터 카드 선택 --</option>
                            </select>
                            <label>돌파 레벨: <input type="number" id="master-sc-level" min="0" max="4" value="4" required></label>
                            <button type="submit">컬렉션에 추가</button>
                        </form>
                        <form id="add-custom-sc-form">
                            <h3>커스텀 카드로 추가</h3>
                            <input type="text" id="custom-sc-name" placeholder="카드 이름" required>
                            <textarea id="custom-sc-skills" placeholder="스킬 목록 (한 줄에 하나씩 입력)
예: 코너회복
없는스킬#passive#중거리 (커스텀)" rows="5"></textarea>
                            <button type="submit">커스텀 카드 추가</button>
                        </form>
                    </div>
                    <div class="collection-list-container">
                        <h3>내 서포트 카드 목록</h3>
                        <div id="sc-collection-list" class="collection-list"></div>
                    </div>
                </div>
                <!-- 인자 탭 -->
                <div id="inza-tab" class="tab-content">
                    <div class="collection-forms">
                         <form id="add-master-inza-form">
                            <h3>기존 인자로 추가 (검색)</h3>
                            <input type="text" id="master-inza-search" placeholder="마스터 인자 이름 검색">
                            <div id="master-inza-search-results"></div>
                        </form>
                        <form id="add-custom-inza-form">
                             <h3>커스텀 인자로 추가</h3>
                            <input type="text" id="custom-inza-name" placeholder="인자 이름" required>
                             <textarea id="custom-inza-skills" placeholder="스킬 목록 (한 줄에 하나씩 입력)" rows="5"></textarea>
                            <button type="submit">커스텀 인자 추가</button>
                        </form>
                    </div>
                     <div class="collection-list-container">
                        <h3>내 인자 목록</h3>
                        <div id="inza-collection-list" class="collection-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js?v=0.9.0"></script>
</body>
</html>